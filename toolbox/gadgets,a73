#
# RISC OS Toolbox - Gadgets
#
from swi import swi

class Gadget:
    def __init__(self, window, id):
        self.window = window
        self.id     = id
        window.gadgets[id] = self

    def get_flags(self):
        """Gets the gadgets flags."""
        return swi('Toolbox_ObjectMiscOp','0iii;u',self.window.id,64,self.id)

    def set_flags(self, flags):
        """Sets the gadgets flags."""
        swi('Toolbox_ObjectMiscOp','0iiiu',self.window.id,65,self.id,flags)

    def get_flag(self, flag):
        """Gets the one gadge flag."""
        return self.get_flags() & 1<<flag != 0

    def set_flag(self, flag, value):
        """Sets one gadget flag."""
        mask = 0xffffff - 1<<flag
        self.set_flags(
            self.get_flags() & mask | (1<<flag if value else 0))

    @property
    def faded(self):
        return self.get_flag(31)

    @faded.setter
    def faded(self, value):
        self.set_flag(31, value)

class ActionButton(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class Adjuster(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class Button(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class DisplayField(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

    def set_text(self, text):
        swi('Toolbox_ObjectMiscOp','0iiis',self.window.id,448,self.id,text)

class Draggable(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class Label(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class LabelledBox(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class NumberRange(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class OptionButton(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

    @property
    def selected(self):
        return bool(
            swi('Toolbox_ObjectMiscOp','0iii;i',self.window.id,197,self.id))

    @selected.setter
    def selected(self, value):
        swi('Toolbox_ObjectMiscOp','0iiii',self.window.id,196,self.id,value)

class PopupMenu(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class RadioButton(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class ScrollList(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class Slider(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class StringSet(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class TextArea(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class ToolAction(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)

class WritableField(Gadget):
    def __init__(self, window, id):
        Gadget.__init__(self, window, id)


